<!DOCTYPE html>
<html>
  <head>
    <title>Таблица Умножения</title>
    <style>
      .incorrect {
        color: red;
      }
       .incorrect {
        color: green;
      }
    
      button {
        margin: 10px;
      }
    </style>
  </head>
<body>

<h2>Таблица Умножения</h2>


</style>

<script>
  function generateMultiplicationTable() {
    var num1 = Math.floor(Math.random() * 10) + 1;
    var num2 = Math.floor(Math.random() * 10) + 1;
    var correctAnswer = num1 * num2;

    var question = num1 + " x " + num2 + " = " + correctAnswer;
    
    var answers = [correctAnswer, Math.floor(Math.random() * 100), Math.floor(Math.random() * 100)];
    answers.sort(() => Math.random() - 0.5);

    var questionObject = {
      question: question,
      answers: answers
    };

    localStorage.setItem("question_" + localStorage.length, JSON.stringify(questionObject));
    
    document.write("<p>Сколько " + num1 + " x " + num2 + "?</p>");

    for (var i = 0; i < answers.length; i++) {
      document.write("<button onclick='checkAnswer(" + answers[i] + "," + correctAnswer + "," + i + ")'>" + answers[i] + "</button>");
    }
  }

  function checkAnswer(selectedAnswer, correctAnswer, index) {
    const answerBtn = document.getElementsByTagName("button")[index];
    
    
    if (selectedAnswer === correctAnswer) {
      answerBtn.classList.add("correct");
    } else {
      answerBtn.classList.add("incorrect");
    }
    const historyObj = JSON.parse(localStorage.getItem("question_" + (localStorage.length-1)));
    
    localStorage.removeItem("question_" + (localStorage.length-1));
    
    historyObj.answer = Number(answerBtn.textContent);
    
    
    
    localStorage.setItem("question_" + localStorage.length, JSON.stringify(historyObj));
    
    location.reload();
  }

   
  function showPreviousQuestions() {
    for (var i = 0; i < localStorage.length; i++) {
      var questionObject = JSON.parse(localStorage.getItem("question_" + i));
      document.write("<span>" + questionObject.question + "</span>");
      let [question, answer] = questionObject.question.split('=');

           
      if(Number(answer)===questionObject?.answer){
         document.write("<span> Ответ: " + questionObject.answer + "</span>");
      }else{
         document.write("<span style='color: red'> Ответ: " + questionObject.answer + "</span>");
      }
      document.write("<br>");
      
    }

    document.write("<button onclick='location.reload()' style='margin-top:100px'>Назад</button>");
  }

  generateMultiplicationTable();
</script>

<br>
<button onclick="showPreviousQuestions()" style="margin-top:100px">Ответы</button>

</body>
</html>
